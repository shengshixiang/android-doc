

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<title>victor</title>


  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/default.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script src="../../../../_static/translations.js"></script>
        <script src="../../../../_static/js/baidutongji.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="../../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> victor_文档
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">README</a></li>
<li><a class="reference internal" href="#split">split</a></li>
<li><a class="reference internal" href="#lsof">lsof</a></li>
<li><a class="reference internal" href="#git">git</a></li>
<li><a class="reference internal" href="#git-tag">git tag</a></li>
<li><a class="reference internal" href="#find">find</a></li>
<li><a class="reference internal" href="#grep">grep</a></li>
<li><a class="reference internal" href="#sed">sed</a></li>
<li><a class="reference internal" href="#dump-stack">dump_stack</a></li>
<li><a class="reference internal" href="#patch">patch</a></li>
<li><a class="reference internal" href="#dd">dd</a></li>
<li><a class="reference internal" href="#tr">tr</a></li>
<li><a class="reference internal" href="#dev-null">/dev/null</a></li>
<li><a class="reference internal" href="#tee">tee</a></li>
<li><a class="reference internal" href="#awk">awk</a><ul>
<li><a class="reference internal" href="#awk-pattern-action-file">awk ‘{pattern + action}’ <file></a></li>
<li><a class="reference internal" href="#id1">分隔符</a></li>
<li><a class="reference internal" href="#id2">awk 的内置变量</a></li>
<li><a class="reference internal" href="#id3">条件判断</a></li>
<li><a class="reference internal" href="#id4">统计值的计算</a></li>
<li><a class="reference internal" href="#printprintf">print和printf</a></li>
</ul>
</li>
<li><a class="reference internal" href="#quota">quota</a></li>
<li><a class="reference internal" href="#top">top</a><ul>
<li><a class="reference internal" href="#d-secs">-d secs 指定进程列表的刷新速度，单位秒。</a></li>
<li><a class="reference internal" href="#n-max-top">-n max 指定进程列表的刷新次数，到达指定次数后 top 退出。</a></li>
<li><a class="reference internal" href="#u-user">-u user 只显示指定用户启动的进程</a></li>
<li><a class="reference internal" href="#p-pid-pid">-p pid 只显示指定 pid 的进程信息</a></li>
<li><a class="reference internal" href="#o-fld-cpu">-o fld 指定使用那一列来对进程进行排序，默认以CPU负载情况倒序排序</a></li>
<li><a class="reference internal" href="#b-n">-b ,以批处理的方式打印数据,可以配合重定向&gt; 输出到文件,或者配合 -n 打印几次后推出</a></li>
<li><a class="reference internal" href="#i-idle-zombie">-i ,不显示任何闲置 (idle) 或无用 (zombie) 的进程</a></li>
<li><a class="reference internal" href="#id5">top 交互模式</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vim">vim</a></li>
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">victor_文档</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
     
<li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
<li>README</li>
<li style="float: right;margin-left: 10px;"><a href="javascript:history.forward()">Forward</a></li>
<li style="float: right;margin-left: 10px;"><a href="javascript:history.back()">Go Back</a> | </li>
<li style="float: right;margin-left: 10px;"><a href="/index.html">Home</a> | </li>

    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="readme">
<h1>README<a class="headerlink" href="#readme" title="此标题的永久链接">¶</a></h1>
<p>常用Linux命令备注</p>
</div>
<div class="section" id="split">
<h1>split<a class="headerlink" href="#split" title="此标题的永久链接">¶</a></h1>
<p>切割文件命令</p>
<ul>
<li><p>split -b 5m -d –verbose binder_1009_2.txt binder_1009_2_</p>
<blockquote>
<div><p>5m每个文件,数字结尾,切割文件</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="lsof">
<h1>lsof<a class="headerlink" href="#lsof" title="此标题的永久链接">¶</a></h1>
<p>lsof（list open files）是一个列出当前系统打开文件的工具</p>
<ul class="simple">
<li><p>lsof | grep文件名</p></li>
<li><p>lsof <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">httpd</span></code>        //查看哪个进程在使用apache的可执行文件</p></li>
<li><p>lsof /etc/passwd          //查看哪个进程在占用/etc/passwd</p></li>
<li><p>lsof /dev/hda6            //查看哪个进程在占用hda6</p></li>
<li><p>lsof /dev/cdrom           //查看哪个进程在占用光驱</p></li>
<li><p>lsof -c sendmail          //查看sendmail进程现在打开的文件</p></li>
<li><p>lsof -c courier -u ^zahn  //显示出哪些文件被以courier打头的进程打开，但是并不属于用户zahn</p></li>
<li><p>lsof -p 30297             //列出进程id为30297的进程所打开的文件</p></li>
<li><p>lsof -D /tmp              //显示所有在/tmp目录下打开文件的进程</p></li>
<li><p>lsof -u1000               //查看uid是1000的用户的进程的文件使用情况</p></li>
<li><p>lsof -utony               //查看用户tony的进程的文件使用情况</p></li>
<li><p>lsof -u^tony              //查看不是用户tony的进程的文件使用情况(^是取反的意思)</p></li>
<li><p>lsof -i                   //显示所有已经打开的端口</p></li>
</ul>
</div>
<div class="section" id="git">
<h1>git<a class="headerlink" href="#git" title="此标题的永久链接">¶</a></h1>
<ul>
<li><p>生成patch</p>
<ul>
<li><p>git format-patch -1 <r1></p></li>
<li><p>git format-patch -1 5f0b0972d987e8caf16edd3312aa5e3151b8dc38 -o ~/cve/CVE-2023-20966</p>
<p>生成如下</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~/</span><span class="n">cve</span><span class="o">/</span><span class="n">CVE</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">20966</span><span class="o">/</span><span class="mi">0001</span><span class="o">-</span><span class="n">Title</span><span class="o">-</span><span class="n">CVE</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mf">20966.</span><span class="n">patch</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>应用patch</p>
<ul class="simple">
<li><p>git am 0001-limit-log-function.patch</p></li>
</ul>
</li>
<li><p>生成patch,不带commit信息</p>
<ul class="simple">
<li><p>git diff 2a2fb4539925bfa4a141fe492d9828d030f7c8a8  89aebfcc73bdac8054be1a242598610d8ed5f3c8 &gt; patch.diff</p></li>
</ul>
</li>
<li><p>应用不带commit的diff patch</p>
<ul class="simple">
<li><p>git apply pn5190_suspend_close_clock.patch</p></li>
</ul>
</li>
<li><p>git am 与 apply区别</p></li>
</ul>
<p>git apply用于应用直接差异(例如来自git diff),</p>
<p>git am 应用与git format-patch</p>
</div>
<div class="section" id="git-tag">
<h1>git tag<a class="headerlink" href="#git-tag" title="此标题的永久链接">¶</a></h1>
<ul class="simple">
<li><p>查看tag, git tag</p></li>
<li><p>checkout某一个tag, git checkout tag_name -b new_branch_name</p></li>
</ul>
</div>
<div class="section" id="find">
<h1>find<a class="headerlink" href="#find" title="此标题的永久链接">¶</a></h1>
<ul class="simple">
<li><p>忽略某个路径查找</p>
<ul>
<li><p>find . ! -path “./out/<em>” -name “</em>.mk”</p></li>
</ul>
</li>
<li><p>查找两个</p>
<ul>
<li><p>find -name *.c -or -name *.h</p></li>
</ul>
</li>
<li><p>找到一条就停止</p>
<ul>
<li></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="grep">
<h1>grep<a class="headerlink" href="#grep" title="此标题的永久链接">¶</a></h1>
<ul class="simple">
<li><p>找到一条就停止</p>
<ul>
<li><p>grep -m 1</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="sed">
<h1>sed<a class="headerlink" href="#sed" title="此标题的永久链接">¶</a></h1>
<ul>
<li><p>sed -e “/grep/d” -e “/gpt/d”</p>
<blockquote>
<div><p>-e表示多个指令，
/grep/表示匹配到grep的行
d表示删除
上命令表示，删除带grep gpt的行</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="dump-stack">
<h1>dump_stack<a class="headerlink" href="#dump-stack" title="此标题的永久链接">¶</a></h1>
<ul class="simple">
<li><p>内核 dump_stack();  linux堆栈,linux打印堆栈</p></li>
</ul>
</div>
<div class="section" id="patch">
<h1>patch<a class="headerlink" href="#patch" title="此标题的永久链接">¶</a></h1>
<ul class="simple">
<li><p>patch合入 补丁 diff补丁</p></li>
</ul>
</div>
<div class="section" id="dd">
<h1>dd<a class="headerlink" href="#dd" title="此标题的永久链接">¶</a></h1>
<ul>
<li><p>if = 文件名：输入文件名，缺省为标准输入。即指定源文件</p></li>
<li><p>of = 文件名：输出文件名，缺省为标准输入。即指定目的文件。 &lt; of = output file &gt;</p></li>
<li><p>ibs = bytes：一次读入bytes个字节，即指定一个块大小为bytes字节</p></li>
<li><p>obs = bytes：一次输出bytes个字节，即指定一个块大小为bytes字节</p></li>
<li><p>bs = bytes：同时设置读入/输出的块大小为bytes个字节。</p></li>
<li><p>cbs = bytes：一次转换bytes个字节，即指定转换缓冲区的大小</p></li>
<li><p>skip = blocks：从输入文件开头跳过blocks个块后再开始复制</p>
<blockquote>
<div><p>注意：通常只用当输出文件是磁盘或磁带时才有效，即备份到磁盘或磁带时才有效。</p>
</div></blockquote>
</li>
<li><p>count = blocks：仅拷贝blocks个块，块大小等于 ibs 指定的字节数。</p></li>
<li><p>conv = conversion：用指定的参数转换文件。</p>
<ul class="simple">
<li><p>ascii：转换ebcdic为ascii；</p></li>
<li><p>ebcdic：转换ascii为ebcdic；</p></li>
<li><p>ibm：转换ascii为alternate ebcdic；</p></li>
<li><p>block：把每一行转换为长度为cbs，不足部分用空格填充；</p></li>
<li><p>unblock：使每一行的长度都为cbs，不足部分用空格填充；</p></li>
<li><p>lcase：把大写字符转换为小写字符；</p></li>
<li><p>ucase：把小写字符转换为大写字符</p></li>
<li><p>swab：交换输入的每对字节；</p></li>
<li><p>noerror：出错时不停止；</p></li>
<li><p>notrunc：不截短输出文件；</p></li>
<li><p>sync：将每个输入块填充到ibs个字节，不足部分用空（NUL）字符补齐。</p></li>
</ul>
</li>
<li><p>输出100KB ,全是0的 zero_100k.bin</p>
<ul class="simple">
<li><p>dd if=/dev/zero of=zebo_100k.bin bs=1024 count=100</p></li>
<li><p>dd if=/dev/zero bs=8192 count=5000000 of=/sdcard/40Gb.file</p></li>
</ul>
</li>
<li><p>输出100KB,全是0xff 的 ff_100.bin</p>
<ul>
<li><p>tr ‘\000’ ‘\377’ &lt; /dev/zero | dd of=fall_0xff.bin bs=1024 count=100</p>
<blockquote>
<div><p>把输入的/dev/zero  \000,替换成 \377, tr命令是替换
然后dd到 of=fall_0xff.bin
\000 是 三位8进制,就是0
\377 是三位8进制 = 16进制的FF</p>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="tr">
<h1>tr<a class="headerlink" href="#tr" title="此标题的永久链接">¶</a></h1>
<p>Text Replacer,用于进行文本替换,tr 只能进行字符的替换、缩减和删除，不能用来替换字符串</p>
<ul>
<li><p>tr -c -d -s [“string1_to_translate_from”] [“string2_to_translate_to”] file</p>
<ul class="simple">
<li><p>-c 用字符串1中字符集的补集替换此字符集，要求字符集为ASCII。</p></li>
<li><p>-d 删除字符串1中所有输入字符。</p></li>
<li><p>-s 删除所有重复出现字符序列，只保留第一个；即将重复出现字符串压缩为一个字符串。</p></li>
</ul>
</li>
<li><p>去除oops.txt里面的重复的小写字符 （ # -s会保留第一个字符）</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat oops.txt</span>
<span class="n">ddddfffabccccc</span>
<span class="n">lerrrrdddd</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># tr -s &quot;a-z&quot; &lt; oops.txt &gt; result.txt</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat result.txt</span>
<span class="n">dfabc</span>
<span class="n">lerd</span>
</pre></div>
</div>
</li>
<li><p>删除空行(除了第一行)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat oops.txt</span>
<span class="n">ddddfffabccccc</span>
<span class="n">lerrrrdddd</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># tr -s &quot;\012&quot; &lt; oops.txt &gt; result.txt</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat result.txt</span>
<span class="n">ddddfffabccccc</span>
<span class="n">lerrrrdddd</span>
</pre></div>
</div>
</li>
<li><p>删除所有行结束符</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat oops.txt</span>
<span class="n">ddddfffabccccc</span>
<span class="n">lerrrrdddd</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># tr -d &quot;\012&quot; &lt;oops.txt &gt; result.txt</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat result.txt</span>
<span class="n">ddddfffabccccclerrrrdddd</span>
</pre></div>
</div>
</li>
<li><p>小写到大写</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat oops.txt</span>
<span class="n">ddddfffabccccc</span>
<span class="n">errrrdddd</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat oops.txt | tr &quot;a-z&quot; &quot;A-Z&quot; &gt; result.txt</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat result.txt</span>
<span class="n">DDDDFFFABCCCCC</span>
<span class="n">ERRRRDDDD</span>
</pre></div>
</div>
<ul class="simple">
<li><p>删除指定的字符（# -d 与 -s 不同，-d会全部删除，但-s会保留第一个）</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat oops.txt</span>
<span class="n">ddddfffabccccc</span>
<span class="n">errrrdddd</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat oops.txt | tr -d &quot;bd&quot; &gt; result.txt</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat result.txt</span>
<span class="n">fffaccccc</span>
<span class="n">errrr</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat oops.txt | tr -s &quot;bd&quot; &gt; result.txt</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat result.txt</span>
<span class="n">dfffabccccc</span>
<span class="n">errrrd</span>
</pre></div>
</div>
<ul class="simple">
<li><p>替代指定的字符（#一对一的替代）</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat oops.txt</span>
<span class="n">ddddfffabccccc</span>
<span class="n">errrrdddd</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat oops.txt | tr &quot;bd&quot; &quot;BD&quot; &gt; result.txt</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># cat result.txt</span>
<span class="n">DDDDfffaBccccc</span>
<span class="n">errrrDDDD</span>
</pre></div>
</div>
</div>
<div class="section" id="dev-null">
<h1>/dev/null<a class="headerlink" href="#dev-null" title="此标题的永久链接">¶</a></h1>
<ul>
<li><p>2&gt;/dev/null</p>
<p>意思就是把错误输出到“黑洞”</p>
</li>
<li><p>2&gt;&amp;1 &gt;/dev/null</p>
<p>意思就是把错误输出2重定向到标准出书1，也就是屏幕，标准输出进了“黑洞”，也就是标准输出进了黑洞，错误输出打印到屏幕</p>
</li>
<li><blockquote>
<div><p>/dev/null 2&gt;&amp;1</p>
</div></blockquote>
<p>默认情况是1，也就是等同于1&gt;/dev/null 2&gt;&amp;1。意思就是把标准输出重定向到“黑洞”，还把错误输出2重定向到标准输出1，也就是标准输出和错误输出都进了“黑洞”</p>
</li>
<li><p>Linux系统预留可三个文件描述符：0、1和2，他们的意义如下所示：</p>
<p>0——标准输入（stdin）
1——标准输出（stdout）
2——标准错误（stderr）</p>
</li>
</ul>
</div>
<div class="section" id="tee">
<h1>tee<a class="headerlink" href="#tee" title="此标题的永久链接">¶</a></h1>
<p>用途—-显示程序的输出并将其复制到一个文件中。</p>
<p>tee [-ai][–help][–version][文件…]</p>
<ul class="simple">
<li><p>-a或–append 　附加到既有文件的后面，而非覆盖它．</p></li>
<li><p>-i或–ignore-interrupts 　忽略中断信号。</p></li>
<li><p>–help 　在线帮助。</p></li>
<li><p>–version 　显示版本信息。</p></li>
<li><p>使用指令”tee”将用户输入的数据同时保存到文件”file1”和”file2”中，输入如下命令：</p>
<ul>
<li><p>tee file1 file2                   #在两个文件中复制内容</p></li>
</ul>
</li>
<li><p>如果想同时打印到屏幕和文件里，可以这么写</p>
<ul>
<li><p>ls -l | tee -a lsls.log</p></li>
</ul>
</li>
<li><p>如果想把错误输出也同时打印到屏幕和文件，可以这么写：</p>
<ul>
<li><p>ls -l not_find_runoob 2&gt;&amp;1 | tee -a lsls.log</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="awk">
<h1>awk<a class="headerlink" href="#awk" title="此标题的永久链接">¶</a></h1>
<div class="section" id="awk-pattern-action-file">
<h2>awk ‘{pattern + action}’ <file><a class="headerlink" href="#awk-pattern-action-file" title="此标题的永久链接">¶</a></h2>
<ul>
<li><p>awk ‘{print $2, $4, $6}’ log</p>
<p><img alt="0022_0001.png" src="../../../../_images/0022_0001.png" /></p>
</li>
</ul>
</div>
<div class="section" id="id1">
<h2>分隔符<a class="headerlink" href="#id1" title="此标题的永久链接">¶</a></h2>
<ul>
<li><p>awk -F ‘:|,’ ‘{print $2, $4, $6}’ log</p>
<p><img alt="0022_0002.png" src="../../../../_images/0022_0002.png" /></p>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2>awk 的内置变量<a class="headerlink" href="#id2" title="此标题的永久链接">¶</a></h2>
<ul>
<li><p>$0：表示当前整行，$1表示第一个字段，$2表示第二个字段，$n 表示第n个字段；</p></li>
<li><p>NR：表示当前已读的行数；</p></li>
<li><p>NF：表示当前行被分割的列数，NF表示最后一个字段，NF-1 表示倒数第二个字段；</p></li>
<li><p>FILENAME：表示当前文件的名称</p></li>
<li><p>BEGIN：表示在awk程序开始前执行一次</p></li>
<li><p>END：表示在awk程序结束后执行一次。</p></li>
<li><p>在每一行前加上文件名、行号、每行列数，命令如下：</p>
<p><img alt="0022_0003.png" src="../../../../_images/0022_0003.png" /></p>
</li>
</ul>
</div>
<div class="section" id="id3">
<h2>条件判断<a class="headerlink" href="#id3" title="此标题的永久链接">¶</a></h2>
<ul>
<li><p>awk ‘$2 &lt; 5.0 {print $0}’ log</p>
<p><img alt="0022_0004.png" src="../../../../_images/0022_0004.png" /></p>
</li>
</ul>
</div>
<div class="section" id="id4">
<h2>统计值的计算<a class="headerlink" href="#id4" title="此标题的永久链接">¶</a></h2>
<ul>
<li><p>vel 的最大值,awk -F ‘:|,’ ‘BEGIN {max=0} {if($2&gt;max) max=$2} END {print “max vel:”, max}’ log</p>
<p><img alt="0022_0005.png" src="../../../../_images/0022_0005.png" /></p>
</li>
<li><p>acc 的最小值,awk -F ‘:|,’ ‘BEGIN {min=10} {if($4 &lt; min) min=$4} END {print “min acc:”, min}’ log</p>
<p><img alt="0022_0006.png" src="../../../../_images/0022_0006.png" /></p>
</li>
<li><p>计算 steer 的平均值,awk -F ‘:|,’ ‘BEGIN {sum=0} {sum+=$6} END {print “mean steer:”, sum/NR}’ log</p>
<p><img alt="0022_0007.png" src="../../../../_images/0022_0007.png" /></p>
</li>
</ul>
</div>
<div class="section" id="printprintf">
<h2>print和printf<a class="headerlink" href="#printprintf" title="此标题的永久链接">¶</a></h2>
<ul>
<li><p>print：其参数可以是变量、数值或字符串，字符串必须用双引号，参数用逗号分开；</p></li>
<li><p>printf：其用法与C语言的printf相似，可以格式化输出。</p></li>
<li><p>通过printf指定显示两位小数</p>
<p><img alt="0022_0008.png" src="../../../../_images/0022_0008.png" /></p>
</li>
</ul>
</div>
</div>
<div class="section" id="quota">
<h1>quota<a class="headerlink" href="#quota" title="此标题的永久链接">¶</a></h1>
<p>Linux quota命令用于显示磁盘已使用的空间与限制。</p>
<p>执行quota指令，可查询磁盘空间的限制，并得知已使用多少空间。</p>
<ul class="simple">
<li><p>-g 列出群组的磁盘空间限制。</p></li>
<li><p>-q 简明列表，只列出超过限制的部分。</p></li>
<li><p>-u 列出用户的磁盘空间限制。</p></li>
<li><p>-v 显示该用户或群组，在所有挂入系统的存储设备的空间限制。</p></li>
<li><p>-V 显示版本信息。</p></li>
<li><p>quota -uvs xielx</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>xielx@u295:~/ssdCode/a6650_1$ quota -uvs xielx
quota: Cannot open quotafile /SAS-LV/aquota.user: Permission denied
quota: Cannot open quotafile /SAS-LV/aquota.user: Permission denied
quota: Cannot open quotafile /SAS-LV/quota.user: No such file or directory
Disk quotas for user xielx (uid 1001): 
     Filesystem   space   quota   limit   grace   files   quota   limit   grace
/dev/mapper/ubuntu--vg-ubuntu--lv
                   612G    700G    763G           7173k       0       0        
/dev/mapper/SSD--VG-SSD--LV
                  1510G*  1431G   1526G   6days  13284k       0       0       
</pre></div>
</div>
</div>
<div class="section" id="top">
<h1>top<a class="headerlink" href="#top" title="此标题的永久链接">¶</a></h1>
<div class="section" id="d-secs">
<h2>-d secs 指定进程列表的刷新速度，单位秒。<a class="headerlink" href="#d-secs" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p>top -d 5(每隔五秒刷新一次进程列表)</p></li>
</ul>
</div>
<div class="section" id="n-max-top">
<h2>-n max 指定进程列表的刷新次数，到达指定次数后 top 退出。<a class="headerlink" href="#n-max-top" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p>top -n 3(在刷新3次进程列表后退出)</p></li>
</ul>
</div>
<div class="section" id="u-user">
<h2>-u user 只显示指定用户启动的进程<a class="headerlink" href="#u-user" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p>top -u root(只显示以root用户启动的进程)</p></li>
</ul>
</div>
<div class="section" id="p-pid-pid">
<h2>-p pid 只显示指定 pid 的进程信息<a class="headerlink" href="#p-pid-pid" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p>top -p 1(只显示PID=1的进程)</p></li>
</ul>
</div>
<div class="section" id="o-fld-cpu">
<h2>-o fld 指定使用那一列来对进程进行排序，默认以CPU负载情况倒序排序<a class="headerlink" href="#o-fld-cpu" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p>top -o -PID(使用 PID 字段降序排序)</p></li>
<li><p>top -o -USER</p></li>
<li><p>top -o 就是使用默认的cpu负载</p></li>
<li><p>有以下选项</p>
<ul>
<li><p>PID       = Process Id</p></li>
<li><p>USER      = 用户</p></li>
<li><p>NI        = Nice Value</p></li>
<li><p>VIRT      = Virtual Image (KiB)</p></li>
<li><p>RES       = Resident Size (KiB)</p></li>
<li><p>SHR       = Shared Memory (KiB)</p></li>
<li><p>S         = Process Status</p></li>
<li><p>CPU       = CPU负载,默认</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="b-n">
<h2>-b ,以批处理的方式打印数据,可以配合重定向&gt; 输出到文件,或者配合 -n 打印几次后推出<a class="headerlink" href="#b-n" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p>top -b</p></li>
</ul>
<p>top 命令的批处理模式(Batch-mode)可以区别于正常使用的交互模式(Interactive-mode),在批处理模式下top 只会不断打印系统状态，无法接受其他交互模式下的命令。这种状态有点类似于 ping命令，如果配合-n 选项指定刷新次数的话就更像了，我们可以通过批处理模式将系统状态不断打印到日志中，实现实时监控的效果。</p>
</div>
<div class="section" id="i-idle-zombie">
<h2>-i ,不显示任何闲置 (idle) 或无用 (zombie) 的进程<a class="headerlink" href="#i-idle-zombie" title="此标题的永久链接">¶</a></h2>
<ul class="simple">
<li><p>top -i</p></li>
</ul>
</div>
<div class="section" id="id5">
<h2>top 交互模式<a class="headerlink" href="#id5" title="此标题的永久链接">¶</a></h2>
<p>在上面我们提到了一个交互模式的概念，其实正常输入 top 命令不带任何参数进入的一个terminal 界面就是了。我们在这个模式下可以通过交互命令(Interactive Command)实现一些更加高级的操作，同时上面的top选项也可以在交互模式下通过交互命令实现配置。</p>
<ul class="simple">
<li><p>交互模式,-h 可以出现help菜单</p></li>
</ul>
<p><img alt="0022_0009" src="../../../../_images/0022_0009.png" /></p>
<ul class="simple">
<li><p>敲e,可以切换内存显示单位</p></li>
<li><p>敲s,可以改变刷新速度</p></li>
<li><p>m 切换内存使用量的显示样式</p></li>
<li><p>n 设置进程的显示数量</p></li>
<li><p>b 高亮排序列</p></li>
<li><p>H 显示线程</p></li>
<li><p>i 切换是否显示空闲进程</p></li>
<li><p>k 结束指定进程</p></li>
<li><p>V 命令显示进程的树状结构</p></li>
<li><p>F 命令指定字段过滤</p></li>
</ul>
<p><img alt="0022_0010" src="../../../../_images/0022_0010.png" /></p>
<ul class="simple">
<li><p>o 命令执行过滤,复杂,就不说了</p></li>
</ul>
</div>
</div>
<div class="section" id="vim">
<h1>vim<a class="headerlink" href="#vim" title="此标题的永久链接">¶</a></h1>
<ul>
<li><p>:%s//android///QSSI.12//g</p>
<p>把整个文件的/android/替换成 /QSSI.12/</p>
</li>
</ul>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; 版权所有 2022, victor.

    </p>
  </div>
    
    
    
    利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.

<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id: "JoV5csIHTGhHiGQ4",ck: "JoV5csIHTGhHiGQ4"})</script>

<br/>
<script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/JoV5csIHTGhHiGQ4/quote.js?theme=#4C8AC2,#BB2626,#040000,#333333,#AE3535,#1690FF,14&f=14"></script>



</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>